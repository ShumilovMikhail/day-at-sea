@if (!isMobile) {
<table class="table clients-table">
  <tr>
    <th class="id">ID клиента</th>
    <th class="full-name">ФИО клиента</th>
    <th class="is-vip">VIP</th>
    <th class="phone">Телефон</th>
    <th class="email">Email</th>
    <th class="bookings-count">Количество броней</th>
  </tr>
  @for (client of clients; track client) {
  <tr>
    <td>
      {{ client.id }}
    </td>
    <td>{{ client.fullName }}</td>
    <td class="vip-cell">
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        (click)="onVipChange(client.id)"
      >
        <path
          [ngClass]="{
            'star-active': client.isVip
          }"
          d="M14.54 11.5081L17.385 8.61C17.5475 8.445 17.4968 8.2425 17.4768 8.18375C17.455 8.11812 17.3837 7.96187 17.1981 7.93375L13.2668 7.33687C12.745 7.25813 12.295 6.91875 12.0643 6.43062L10.3062 2.70813C10.2175 2.52063 10.0625 2.5 9.99996 2.5C9.93746 2.5 9.78246 2.52063 9.69371 2.70813L7.93558 6.43062C7.70433 6.91875 7.25496 7.25813 6.73246 7.33687L2.80121 7.93375C2.61621 7.96187 2.54496 8.1175 2.52308 8.18375C2.50371 8.24187 2.45308 8.44438 2.61496 8.61L5.45996 11.5081C5.82746 11.8825 5.99621 12.42 5.90996 12.9456L5.23871 17.0375C5.19933 17.2788 5.34933 17.4056 5.39621 17.4388C5.47058 17.4913 5.58746 17.535 5.73058 17.4587L9.24683 15.5269C9.71808 15.2663 10.2812 15.2675 10.7531 15.5269L14.2693 17.4587C14.4106 17.5356 14.5293 17.4913 14.6031 17.4394C14.65 17.4056 14.8 17.2788 14.7612 17.0375L14.09 12.9456C14.0037 12.4194 14.1725 11.8825 14.54 11.5081Z"
          fill="transparent"
        />
        <path
          d="M18.2769 9.48563C18.715 9.03875 18.8631 8.38875 18.6619 7.78813C18.4675 7.20563 17.9787 6.78813 17.3856 6.69812L13.4537 6.10125C13.3437 6.08437 13.2469 6.00813 13.1944 5.89688L11.4362 2.17438C11.1669 1.60438 10.6169 1.25 9.99998 1.25C9.38311 1.25 8.83248 1.60438 8.56373 2.17438L6.80561 5.89688C6.75311 6.00813 6.65561 6.08437 6.54561 6.10125L2.61373 6.69812C2.02061 6.78875 1.53186 7.20625 1.33748 7.78875C1.13748 8.38937 1.28561 9.03938 1.72373 9.48625L4.56873 12.3844C4.65873 12.4756 4.69936 12.61 4.67748 12.7431L4.00561 16.835C3.90123 17.4713 4.15811 18.0938 4.67498 18.46C4.94748 18.6525 5.26186 18.7494 5.57873 18.7494C5.83686 18.7494 6.09561 18.6844 6.33311 18.5544L9.84936 16.6225C9.94498 16.57 10.0544 16.57 10.1512 16.6225L13.6669 18.5544C14.1975 18.8456 14.8306 18.8088 15.3244 18.4606C15.8419 18.095 16.0987 17.4725 15.9937 16.8356L15.3231 12.7444C15.3012 12.6106 15.3412 12.4756 15.4319 12.3844L18.2769 9.48563ZM14.6031 17.4388C14.5294 17.4906 14.41 17.535 14.2694 17.4581L10.7531 15.5262C10.2819 15.2669 9.71873 15.2656 9.24686 15.5262L5.73061 17.4581C5.58748 17.5344 5.46998 17.4906 5.39623 17.4381C5.34936 17.405 5.19873 17.2781 5.23873 17.0369L5.91061 12.945C5.99686 12.4194 5.82811 11.8819 5.46061 11.5075L2.61561 8.60938C2.45311 8.44375 2.50373 8.24125 2.52373 8.18313C2.54561 8.1175 2.61686 7.96125 2.80186 7.93313L6.73311 7.33625C7.25561 7.2575 7.70498 6.91813 7.93623 6.43L9.69436 2.7075C9.78248 2.52062 9.93748 2.5 9.99998 2.5C10.0625 2.5 10.2175 2.52063 10.3056 2.70813L12.0637 6.43062C12.2944 6.91875 12.7444 7.25813 13.2662 7.33687L17.1975 7.93375C17.3831 7.96187 17.4544 8.1175 17.4762 8.18375C17.4956 8.24187 17.5462 8.44438 17.3844 8.61L14.5394 11.5081C14.1719 11.8825 14.0037 12.4194 14.0894 12.9456L14.7606 17.0375C14.8006 17.2787 14.65 17.4056 14.6031 17.4388Z"
          fill="#303030"
        />
      </svg>
    </td>
    <td>{{ client.phone }}</td>
    <td>{{ client.email }}</td>
    <td class="bookings-count-cell" (click)="onShowBookingHistory(client.id)">
      {{ client.bookingsCount }} ({{ client.totalAmount }}₽)
    </td>
  </tr>
  }
</table>
} @else {
<ul class="clients-list">
  @for (client of clients; track client) {
  <ng-container *ngTemplateOutlet="clientItem; context: { client }"></ng-container>
  }
</ul>
}

<ng-template let-client="client" #clientItem>
  <div class="clients-item" utilsAccordion [buttonToggle]="clientChangeButton">
    <div class="clients-item__header">
      <div class="clients-item__inner">
        <span>{{ client.fullName }}</span>
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          (click)="onVipChange(client.id)"
        >
          <path
            [ngClass]="{
              'star-active': client.isVip
            }"
            d="M14.54 11.5081L17.385 8.61C17.5475 8.445 17.4968 8.2425 17.4768 8.18375C17.455 8.11812 17.3837 7.96187 17.1981 7.93375L13.2668 7.33687C12.745 7.25813 12.295 6.91875 12.0643 6.43062L10.3062 2.70813C10.2175 2.52063 10.0625 2.5 9.99996 2.5C9.93746 2.5 9.78246 2.52063 9.69371 2.70813L7.93558 6.43062C7.70433 6.91875 7.25496 7.25813 6.73246 7.33687L2.80121 7.93375C2.61621 7.96187 2.54496 8.1175 2.52308 8.18375C2.50371 8.24187 2.45308 8.44438 2.61496 8.61L5.45996 11.5081C5.82746 11.8825 5.99621 12.42 5.90996 12.9456L5.23871 17.0375C5.19933 17.2788 5.34933 17.4056 5.39621 17.4388C5.47058 17.4913 5.58746 17.535 5.73058 17.4587L9.24683 15.5269C9.71808 15.2663 10.2812 15.2675 10.7531 15.5269L14.2693 17.4587C14.4106 17.5356 14.5293 17.4913 14.6031 17.4394C14.65 17.4056 14.8 17.2788 14.7612 17.0375L14.09 12.9456C14.0037 12.4194 14.1725 11.8825 14.54 11.5081Z"
            fill="transparent"
          />
          <path
            d="M18.2769 9.48563C18.715 9.03875 18.8631 8.38875 18.6619 7.78813C18.4675 7.20563 17.9787 6.78813 17.3856 6.69812L13.4537 6.10125C13.3437 6.08437 13.2469 6.00813 13.1944 5.89688L11.4362 2.17438C11.1669 1.60438 10.6169 1.25 9.99998 1.25C9.38311 1.25 8.83248 1.60438 8.56373 2.17438L6.80561 5.89688C6.75311 6.00813 6.65561 6.08437 6.54561 6.10125L2.61373 6.69812C2.02061 6.78875 1.53186 7.20625 1.33748 7.78875C1.13748 8.38937 1.28561 9.03938 1.72373 9.48625L4.56873 12.3844C4.65873 12.4756 4.69936 12.61 4.67748 12.7431L4.00561 16.835C3.90123 17.4713 4.15811 18.0938 4.67498 18.46C4.94748 18.6525 5.26186 18.7494 5.57873 18.7494C5.83686 18.7494 6.09561 18.6844 6.33311 18.5544L9.84936 16.6225C9.94498 16.57 10.0544 16.57 10.1512 16.6225L13.6669 18.5544C14.1975 18.8456 14.8306 18.8088 15.3244 18.4606C15.8419 18.095 16.0987 17.4725 15.9937 16.8356L15.3231 12.7444C15.3012 12.6106 15.3412 12.4756 15.4319 12.3844L18.2769 9.48563ZM14.6031 17.4388C14.5294 17.4906 14.41 17.535 14.2694 17.4581L10.7531 15.5262C10.2819 15.2669 9.71873 15.2656 9.24686 15.5262L5.73061 17.4581C5.58748 17.5344 5.46998 17.4906 5.39623 17.4381C5.34936 17.405 5.19873 17.2781 5.23873 17.0369L5.91061 12.945C5.99686 12.4194 5.82811 11.8819 5.46061 11.5075L2.61561 8.60938C2.45311 8.44375 2.50373 8.24125 2.52373 8.18313C2.54561 8.1175 2.61686 7.96125 2.80186 7.93313L6.73311 7.33625C7.25561 7.2575 7.70498 6.91813 7.93623 6.43L9.69436 2.7075C9.78248 2.52062 9.93748 2.5 9.99998 2.5C10.0625 2.5 10.2175 2.52063 10.3056 2.70813L12.0637 6.43062C12.2944 6.91875 12.7444 7.25813 13.2662 7.33687L17.1975 7.93375C17.3831 7.96187 17.4544 8.1175 17.4762 8.18375C17.4956 8.24187 17.5462 8.44438 17.3844 8.61L14.5394 11.5081C14.1719 11.8825 14.0037 12.4194 14.0894 12.9456L14.7606 17.0375C14.8006 17.2787 14.65 17.4056 14.6031 17.4388Z"
            fill="#303030"
          />
        </svg>
      </div>
      <img src="assets/images/icons/arrow-toggle.svg" alt="" #clientChangeButton />
    </div>
    <div class="clients-item__content contacts-content">
      <ul class="clients-item__list">
        <li>
          <span>Телефон:</span>
          <p>{{ client.phone }}</p>
        </li>
        <li>
          <span>Email:</span>
          <p>{{ client.email }}</p>
        </li>
        <li>
          <span>Количество броней:</span>
          <p>{{ client.bookingsCount }} ({{ client.totalAmount }}₽)</p>
        </li>
      </ul>
      <button class="booking-history-button" (click)="onShowBookingHistory(client.id)">Посмотреть историю</button>
    </div>
  </div>
</ng-template>
